<script setup>
import { ref } from 'vue';
import { Link, router } from '@inertiajs/vue3'
import { login } from '../../services/auth'
const msg = ref('')
const user = ref({
    email: '',
    password: ''
})
const loading = ref(false)
async function handleSubmit() {
    loading.value = true
    try {
        await login({ ...user.value })
        console.log("Sesion iniciada")
        msg.value = "Se ha ingresado correctamente"
        router.replace('/')


    } catch (error) {
        console.log("Login error ", error)
        msg.value = "No se ha podido ingresar. Intente de nuevo por favor."
    }
}
</script>
<template>
    <nav class="flex justify-between items-center p-4 bg-slate-200 text-slate-800">
        <Link href="/" class="text-xl">Red Social</Link>

    </nav>
    <h1 class="text-center text-2xl mt-8 mb-8 font-medium">Inicio de Sesión</h1>
    <div class="h-1/3 w-1/2 m-auto">
        <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 616.3 629">

            <g>
                <g id="Capa_1">
                    <path class="cls-4"
                        d="M135,240c-20.8-27.8-58.8-34.5-77.7-20.4s-23.2,52.5-2.5,80.3c19.2,25.7,54.1,32.8,73.3,23.1,0,.3,0,.6,0,.9l1.1,5.4c.3,1.3,1.6,2.2,2.9,1.9.4,0,.7-.2,1-.5l9.2-7.2c1.1-.8,1.3-2.4.4-3.4-.2-.3-.5-.5-.9-.7l-4.9-2.3c-.2,0-.4-.1-.5-.2,14.8-15.6,18-51.1-1.3-76.9Z" />
                    <path class="cls-2"
                        d="M89.6,229.5c21.1,3.4,35.9,22.7,33.6,43.9-.2,2.3,3.4,2.3,3.7,0,2.2-22.9-13.7-43.6-36.3-47.5-2.3-.4-3.3,3.1-1,3.5Z" />
                    <path class="cls-4"
                        d="M612.6,274.8c11.2-32.9-4.8-68-27.1-75.6s-56.5,10.5-67.6,43.4c-10.4,30.4,3.6,63.1,22.4,73.5-.3.1-.5.3-.8.5l-3.8,3.9c-.9,1-.9,2.5,0,3.5.3.3.6.5,1,.6l11.1,3.5c1.3.4,2.7-.3,3.1-1.6.1-.4.1-.7,0-1.1l-.9-5.4c0-.2,0-.4-.2-.5,21.3,3.4,52.3-14.1,62.7-44.6Z" />
                    <path class="cls-2"
                        d="M595.5,231.4c9.2,19.3,1.6,42.4-17.2,52.6-2.1,1.1,0,4.2,2.1,3,20.1-11.2,28.2-35.9,18.6-56.8-1-2.1-4.5-.9-3.5,1.2Z" />
                    <path class="cls-5"
                        d="M349.8,60.7C348.3,26,320.7-1,297.1,0s-48.8,30.3-47.3,65c1.4,32.1,26.3,57.5,47.6,60.4-.2.2-.4.5-.5.7l-2.1,5c-.5,1.2,0,2.7,1.3,3.2.3.1.7.2,1.1.2l11.6-.8c1.3,0,2.4-1.2,2.3-2.6,0-.4-.1-.7-.3-1.1l-2.8-4.7c0-.2-.2-.3-.4-.4,21-4.6,43.6-32.2,42.2-64.3Z" />
                    <path class="cls-2"
                        d="M318.2,26.4c15.6,14.7,16.9,38.9,3.1,55.2-1.5,1.8,1.5,3.9,3,2.1,14.7-17.7,13.2-43.7-3.3-59.7-1.7-1.6-4.5.7-2.8,2.4Z" />
                    <circle class="cls-5" cx="351.8" cy="312.5" r="49.8" />
                    <path class="cls-5"
                        d="M349.5,627.9h-13.7c-3.3,0-6-2.7-6-6v-114.4c0-3.3,2.7-6,6-6h13.7c3.3,0,6,2.7,6,6v114.4c0,3.3-2.7,6-6,6Z" />
                    <path class="cls-5"
                        d="M393.4,627.9h-13.7c-3.3,0-6-2.7-6-6v-114.4c0-3.3,2.7-6,6-6h13.7c3.3,0,6,2.7,6,6v114.4c0,3.3-2.7,6-6,6Z" />
                    <path class="cls-5"
                        d="M315.2,409.2l-5.9,12.4c-1.4,3-5,4.3-8.1,2.9l-103.3-49.1c-3-1.4-4.3-5-2.9-8.1l5.9-12.4c1.4-3,5-4.3,8.1-2.9l103.3,49.1c3,1.4,4.3,5,2.9,8.1Z" />
                    <path class="cls-1"
                        d="M330.7,415.8c.3,1.4,0,2.9-.6,4.1l-6.6,12c-1.6,2.9-5.3,4-8.2,2.4l-48.5-21.4c-2.9-1.6-4-5.3-2.4-8.2h0s12.2-22.8,12.2-22.8c1.6-2.9,5.3-4,8.2-2.4,0,0,0,0,0,0l43.6,28.8c1.4.8,1.9,5.4,2.3,6.9,0,.2,0,.3.1.5Z" />
                    <path class="cls-5"
                        d="M390.4,401.1l103.3-49.1c3-1.4,6.6-.1,8.1,2.9l5.9,12.4c1.4,3,.1,6.6-2.9,8.1l-103.3,49.1c-3,1.4-6.6.1-8.1-2.9l-5.9-12.4c-1.4-3-.1-6.6,2.9-8.1Z" />
                    <path class="cls-1"
                        d="M372.1,415.4c.4-1.6.9-6.2,2.3-6.9l43.6-28.8c2.9-1.6,6.6-.6,8.2,2.4,0,0,0,0,0,0l12.2,22.8h0c1.6,2.9.5,6.6-2.4,8.2l-48.5,21.4c-2.9,1.6-6.6.5-8.2-2.4l-6.6-12c-.7-1.3-.9-2.7-.6-4.1,0-.2,0-.3.1-.5Z" />
                    <path class="cls-1"
                        d="M345.1,330.9v-1.9c3.4,0,6.5-.3,8.7-2,1.3-1,2.1-2.6,2.2-4.2,0-1-.3-2-1.1-2.7-1.5-1.3-4-.9-5.8,0l-1.5.7,3-21.6,1.8.3-2.5,18.3c2.1-.8,4.4-.4,6.2.9,1.2,1,1.8,2.6,1.7,4.2-.1,2.2-1.2,4.3-3,5.6-2.9,2.2-6.8,2.3-9.8,2.3Z" />
                    <rect class="cls-1" x="361.6" y="301.1" width="10" height="1.9" />
                    <rect class="cls-1" x="330" y="301.1" width="10" height="1.9" />
                    <path class="cls-1"
                        d="M368.9,385.5h2c3.4,0,6.1-2.7,6.1-6.1s-2.7-6.1-6.1-6.1h-39.1c-3.4,0-6.1,2.7-6.1,6.1s2.7,6.1,6.1,6.1h3.7c-31.4,14.3-51.5,67-51.5,99.8s27.6,50.6,68.2,50.6,78.7-12.3,78.7-50.6-28.3-85.5-62-99.8Z" />
                    <path class="cls-1"
                        d="M349.7,284.1c-1.2-3.7-5.6-4.8-9-3.4-3.9,1.6-6.2,5.7-10,7.6-6.9,3.4-16,1.6-21.2-3.9-5.7-6-6.8-15.4-4-23,3-7.9,10.4-13.5,18.3-15.9,10.5-3.1,21.8-.3,30.9,5.4.9.5,2,.2,2.5-.7,0-.1.1-.3.2-.4,2.5-9.6,13.3-12.3,22-11.3,8.6,1.2,16.7,4.4,23.7,9.5,13.6,9.5,23.1,24.9,24.4,41.4,1.3,17.3-5.1,34.2-17.5,46.3-3.1,2.9-6.6,5.3-9.7,8.1-2.8,2.6-5.6,6.1-5.6,10.1.1,9.4,12.5,12,19.8,12.2,18.7.8,35.2-12.4,38.4-30.8.4-2.2.6-4.4.6-6.6,0-2.4-3.7-2.4-3.7,0,0,8.9-3.6,17.4-9.8,23.8-6.4,6.5-15.2,10.1-24.3,10-5.8,0-21.6-2.8-16.3-12,2.1-3.6,5.8-6.1,9-8.6,3.3-2.6,6.3-5.6,9-8.9,10.8-13.4,15.6-30.6,13.3-47.6-2.4-16.5-12.4-31.4-26-40.9-13-9-36.9-16.9-48.3-1.4-1.2,1.7-2.1,3.5-2.6,5.5l2.7-1.1c-8.8-5.5-19.2-8.3-29.5-6.7-9,1.4-17,6.3-22.1,13.8-5,7.5-5.9,17-2.4,25.3,3.4,8,11.2,13.3,20,13.5,4.6.2,9.2-1.2,12.9-3.9,2.1-1.6,3.7-3.8,5.9-5.2,1.3-.8,4.2-1.3,4.8.6.7,2.2,4.3,1.3,3.5-1h0Z" />
                    <path class="cls-4"
                        d="M432.7,103.3c18.4,1.2,35.2,11.1,45.1,26.7,1.4,2.2,3.1,4.6,2.2,7.3-.7,2.1-2.7,3.5-4.9,3.3-2.8-.3-4.6-3.1-4.9-5.7-.4-3,1.7-5.3,4.3-6.4,6.3-2.7,12.7,1.5,17.8,4.8,11.7,7.6,24.6,14.4,38.7,15.2,13.1.8,27.2-4.3,34.5-15.7,1.3-2-1.9-3.8-3.2-1.8-7.2,11.3-21.9,15.3-34.6,13.6-7.6-1.2-14.9-3.7-21.6-7.3-3.5-1.8-6.9-3.8-10.2-5.9-3.2-2.2-6.5-4.1-10-5.7-5.8-2.4-13.6-2.2-17.6,3.3-3.8,5.2-.9,13.7,5.5,15.2,6,1.4,11.3-4.3,10.1-10.2-.6-3-2.9-6-4.7-8.5-10.8-15.1-27.8-24.6-46.3-25.7-2.4-.1-2.3,3.5,0,3.7h0Z" />
                    <path class="cls-4"
                        d="M133,160.8c-18.4-1.2-35.2-11.1-45.1-26.7-1.4-2.2-3.1-4.6-2.2-7.3.7-2.1,2.7-3.5,4.9-3.3,2.8.3,4.6,3.1,4.9,5.7.4,3-1.7,5.3-4.3,6.4-6.3,2.7-12.7-1.5-17.8-4.8-11.7-7.6-24.6-14.4-38.7-15.2-13.1-.8-27.2,4.3-34.5,15.7-1.3,2,1.9,3.8,3.2,1.8,7.2-11.3,21.9-15.3,34.6-13.6,7.6,1.2,14.9,3.7,21.6,7.3,3.5,1.8,6.9,3.8,10.2,5.9,3.2,2.2,6.5,4.1,10,5.7,5.8,2.4,13.6,2.2,17.6-3.3,3.8-5.2.9-13.7-5.5-15.2-6-1.4-11.3,4.3-10.1,10.2.6,3,2.9,6,4.7,8.5,10.8,15.1,27.8,24.6,46.3,25.7,2.4.1,2.3-3.5,0-3.7h0Z" />

                </g>
            </g>
        </svg>
    </div>
    <form action="" @submit.prevent="handleSubmit" class="p-3">
        <div class="mb-6">
            <label for="email" class="block mb-2">Email</label>
            <input type="email" id="email" class=" p-2 mb-2 w-full border rounded-md bg-slate-100" v-model="user.email" placeholder="nombre@gmail.com"
                required>
        </div>

        <div class="mb-6">
            <label for="text" class="block mb-2">Constraseña</label>
            <input id="password" type="password" class="p-2 w-full border rounded-md bg-slate-100"
                v-model="user.password" required placeholder="Contraseña" />
        </div>

        <input type="submit" value="Ingresar"
            class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-3xl text-sm px-5 py-2.5 w-full" />

    </form>
    <div
        class="fixed z-50 w-full h-16 max-w-xl -translate-x-1/2 bg-slate-200 border border-gray-200  bottom-0 left-1/2  flex justify-between items-center p-4 text-slate-800">
    </div>
    <div class="flex flex-col  items-center justify-center">
        <p class="mt-7">¿No tienes una cuenta?</p>
        <Link class="mt-2 text-blue-600 font-medium " href="/registrarme">Registrarme</Link>
    </div>
    <div v-if="msg !== 'Se ha ingresado correctamente' && msg !== ''" class="bg-red-200 p-4 m-2 rounded-md">
        <p>{{ msg }}</p>
    </div>
    <div v-if="msg == 'Se ha ingresado correctamente'" class="bg-green-200 p-4 m-2 rounded-md">
        <p>{{ msg }}</p>
    </div>
</template>

<style>
.cls-1 {
    fill: #06c;
}

.cls-2 {
    fill: #fff;
}

.cls-3 {
    fill: #06c;
}

.cls-4 {
    fill: #06c !important;
}

.cls-5 {
    fill: #06c !important;
}
</style>
